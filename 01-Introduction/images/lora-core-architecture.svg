<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 420" font-family="Segoe UI,system-ui,sans-serif">
  <defs>
    <filter id="sh" x="-4%" y="-4%" width="110%" height="110%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.1"/>
    </filter>
    <marker id="arr" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0,8 3,0 6" fill="#475569"/>
    </marker>
    <marker id="arr-o" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0,8 3,0 6" fill="#ea580c"/>
    </marker>
    <marker id="arr-b" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0,8 3,0 6" fill="#3b82f6"/>
    </marker>
    <marker id="arr-g" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0,8 3,0 6" fill="#16a34a"/>
    </marker>
  </defs>
  <rect width="800" height="420" rx="14" fill="#fafbff" stroke="#e2e8f0" stroke-width="1.5"/>
  <text x="400" y="30" text-anchor="middle" font-size="18" font-weight="700" fill="#1e293b">LoRA Core Architecture</text>
  <text x="400" y="50" text-anchor="middle" font-size="11" fill="#64748b">h = W&#8320;x + (&#945;/r) &#215; BAx</text>
  <!-- Input -->
  <rect x="30" y="175" width="90" height="55" rx="10" fill="#f0fdf4" stroke="#16a34a" stroke-width="2.5" filter="url(#sh)"/>
  <text x="75" y="200" text-anchor="middle" font-size="13" font-weight="700" fill="#15803d">x</text>
  <text x="75" y="218" text-anchor="middle" font-size="9" fill="#16a34a">(B, S, k)</text>
  <!-- Frozen path -->
  <line x1="120" y1="190" x2="230" y2="115" stroke="#3b82f6" stroke-width="2.5" marker-end="url(#arr-b)"/>
  <rect x="235" y="85" width="200" height="60" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2.5" filter="url(#sh)"/>
  <rect x="235" y="85" width="200" height="22" rx="10" fill="#3b82f6"/>
  <text x="335" y="101" text-anchor="middle" font-size="9" font-weight="600" fill="white">FROZEN</text>
  <text x="335" y="128" text-anchor="middle" font-size="16" font-weight="700" fill="#1d4ed8">W&#8320;</text>
  <!-- LoRA path -->
  <line x1="120" y1="215" x2="180" y2="280" stroke="#ea580c" stroke-width="2.5" marker-end="url(#arr-o)"/>
  <rect x="185" y="265" width="80" height="50" rx="8" fill="#fff7ed" stroke="#ea580c" stroke-width="2.5" filter="url(#sh)"/>
  <text x="225" y="288" text-anchor="middle" font-size="14" font-weight="800" fill="#c2410c">A</text>
  <text x="225" y="306" text-anchor="middle" font-size="8" fill="#f97316">(r &#215; k)</text>
  <line x1="265" y1="290" x2="310" y2="290" stroke="#ea580c" stroke-width="2" marker-end="url(#arr-o)"/>
  <circle cx="335" cy="290" r="18" fill="#fef3c7" stroke="#f59e0b" stroke-width="2.5"/>
  <text x="335" y="295" text-anchor="middle" font-size="10" font-weight="700" fill="#92400e">r</text>
  <line x1="353" y1="290" x2="395" y2="290" stroke="#ea580c" stroke-width="2" marker-end="url(#arr-o)"/>
  <rect x="400" y="265" width="80" height="50" rx="8" fill="#fff7ed" stroke="#ea580c" stroke-width="2.5" filter="url(#sh)"/>
  <text x="440" y="288" text-anchor="middle" font-size="14" font-weight="800" fill="#c2410c">B</text>
  <text x="440" y="306" text-anchor="middle" font-size="8" fill="#f97316">(d &#215; r)</text>
  <line x1="480" y1="290" x2="520" y2="290" stroke="#ea580c" stroke-width="2" marker-end="url(#arr-o)"/>
  <circle cx="545" cy="290" r="18" fill="#fef3c7" stroke="#f59e0b" stroke-width="2.5"/>
  <text x="545" y="287" text-anchor="middle" font-size="10" font-weight="800" fill="#92400e">&#215;</text>
  <text x="545" y="302" text-anchor="middle" font-size="7" fill="#92400e">&#945;/r</text>
  <!-- Sum -->
  <line x1="435" y1="115" x2="620" y2="195" stroke="#3b82f6" stroke-width="2"/>
  <line x1="563" y1="285" x2="620" y2="225" stroke="#ea580c" stroke-width="2"/>
  <circle cx="635" cy="210" r="24" fill="#f0f9ff" stroke="#6366f1" stroke-width="3" filter="url(#sh)"/>
  <text x="635" y="217" text-anchor="middle" font-size="22" font-weight="800" fill="#4f46e5">+</text>
  <!-- Output -->
  <line x1="659" y1="210" x2="700" y2="210" stroke="#6366f1" stroke-width="2.5" marker-end="url(#arr)"/>
  <rect x="705" y="185" width="60" height="50" rx="10" fill="#ede9fe" stroke="#7c3aed" stroke-width="2.5" filter="url(#sh)"/>
  <text x="735" y="208" text-anchor="middle" font-size="16" font-weight="800" fill="#6d28d9">h</text>
  <text x="735" y="226" text-anchor="middle" font-size="8" fill="#7c3aed">(B,S,d)</text>
  <!-- Legend -->
  <rect x="50" y="350" width="700" height="55" rx="10" fill="white" stroke="#e2e8f0" stroke-width="1" filter="url(#sh)"/>
  <circle cx="80" cy="378" r="8" fill="#3b82f6"/><text x="95" y="382" font-size="10" fill="#475569">Frozen path (no gradients)</text>
  <circle cx="280" cy="378" r="8" fill="#ea580c"/><text x="295" y="382" font-size="10" fill="#475569">LoRA trainable path</text>
  <circle cx="500" cy="378" r="8" fill="#f59e0b"/><text x="515" y="382" font-size="10" fill="#475569">Bottleneck (rank r)</text>
  <circle cx="680" cy="378" r="8" fill="#6366f1"/><text x="695" y="382" font-size="10" fill="#475569">Output</text>
</svg>